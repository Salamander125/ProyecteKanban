<Window
    x:Class="ToDoListTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:ToDoListTest"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Kanban Board"
    Width="1200"
    Height="600"
    Background="#F5F5F5"
    mc:Ignorable="d">



    <Window.Resources>

        <Style x:Key="ColumnHeaderStyle" TargetType="TextBlock">

            <Setter Property="FontSize" Value="20" />

            <Setter Property="FontWeight" Value="SemiBold" />

            <Setter Property="Margin" Value="10" />

            <Setter Property="Foreground" Value="#333333" />

        </Style>



        <Style x:Key="FullWidthListViewItem" TargetType="ListViewItem">

            <Setter Property="HorizontalContentAlignment" Value="Stretch" />

            <Setter Property="Padding" Value="0" />

            <Setter Property="Margin" Value="0,4" />

            <Setter Property="Background" Value="Transparent" />

            <Setter Property="Template">

                <Setter.Value>

                    <ControlTemplate TargetType="ListViewItem">

                        <ContentPresenter />

                    </ControlTemplate>

                </Setter.Value>

            </Setter>

        </Style>



        <Style TargetType="ListView">

            <Setter Property="Margin" Value="10" />

            <Setter Property="Background" Value="Transparent" />

            <Setter Property="BorderThickness" Value="0" />

            <Setter Property="AllowDrop" Value="True" />

            <Setter Property="VirtualizingStackPanel.IsVirtualizing" Value="True" />

            <Setter Property="VirtualizingStackPanel.VirtualizationMode" Value="Recycling" />

        </Style>

    </Window.Resources>



    <Grid>

        <Grid.ColumnDefinitions>

            <ColumnDefinition Width="*" />

            <ColumnDefinition Width="*" />

            <ColumnDefinition Width="*" />

            <ColumnDefinition Width="220" />

        </Grid.ColumnDefinitions>



        <Border
            Grid.Column="0"
            Margin="5"
            Background="#EBECF0"
            CornerRadius="8">

            <DockPanel>

                <TextBlock
                    DockPanel.Dock="Top"
                    Style="{StaticResource ColumnHeaderStyle}"
                    Text="Pendientes" />

                <ListView
                    Name="ListaTickets"
                    DragOver="ListView_DragOver"
                    Drop="HandleDrop"
                    ItemContainerStyle="{StaticResource FullWidthListViewItem}"
                    ItemsSource="{Binding TicketsPendientes}"
                    MouseMove="ListView_MouseMove"
                    PreviewMouseLeftButtonDown="ListView_PreviewMouseLeftButtonDown">

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="2" Padding="12" Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="5" MouseLeftButtonUp="AccesoNuevaVentana">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Titol}" TextWrapping="Wrap">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Estat}" Value="2">
                                                        <Setter Property="TextDecorations" Value="Strikethrough" />
                                                        <Setter Property="Foreground" Value="#777" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0">

                                        <Ellipse Width="10" Height="10" Margin="0,0,5,0" VerticalAlignment="Center">
                                            <Ellipse.Style>
                                                <Style TargetType="Ellipse">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="0">
                                                            <Setter Property="Fill" Value="Green" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="1">
                                                            <Setter Property="Fill" Value="Orange" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="2">
                                                            <Setter Property="Fill" Value="Red" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="3">
                                                            <Setter Property="Fill" Value="Purple" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Ellipse.Style>
                                        </Ellipse>

                                        <TextBlock FontSize="11" Foreground="#999" VerticalAlignment="Center" Text="{Binding Codi, StringFormat='#{0}'}" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>

                </ListView>

            </DockPanel>

        </Border>



        <Border
            Grid.Column="1"
            Margin="5"
            Background="#EBECF0"
            CornerRadius="8">

            <DockPanel>

                <TextBlock
                    DockPanel.Dock="Top"
                    Style="{StaticResource ColumnHeaderStyle}"
                    Text="En Curso" />

                <ListView
                    Name="ListaEnCurso"
                    DragOver="ListView_DragOver"
                    Drop="HandleDrop"
                    ItemContainerStyle="{StaticResource FullWidthListViewItem}"
                    ItemsSource="{Binding TicketsEnCurso}"
                    MouseMove="ListView_MouseMove"
                    PreviewMouseLeftButtonDown="ListView_PreviewMouseLeftButtonDown">

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="2" Padding="12" Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="5" MouseLeftButtonUp="AccesoNuevaVentana">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Titol}" TextWrapping="Wrap">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Estat}" Value="2">
                                                        <Setter Property="TextDecorations" Value="Strikethrough" />
                                                        <Setter Property="Foreground" Value="#777" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0">

                                        <Ellipse Width="10" Height="10" Margin="0,0,5,0" VerticalAlignment="Center">
                                            <Ellipse.Style>
                                                <Style TargetType="Ellipse">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="0">
                                                            <Setter Property="Fill" Value="Green" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="1">
                                                            <Setter Property="Fill" Value="Orange" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="2">
                                                            <Setter Property="Fill" Value="Red" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="3">
                                                            <Setter Property="Fill" Value="Purple" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Ellipse.Style>
                                        </Ellipse>

                                        <TextBlock FontSize="11" Foreground="#999" VerticalAlignment="Center" Text="{Binding Codi, StringFormat='#{0}'}" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

            </DockPanel>

        </Border>



        <Border
            Grid.Column="2"
            Margin="5"
            Background="#EBECF0"
            CornerRadius="8">

            <DockPanel>

                <TextBlock
                    DockPanel.Dock="Top"
                    Style="{StaticResource ColumnHeaderStyle}"
                    Text="Finalizados" />

                <ListView
                    Name="ListaFinalizados"
                    DragOver="ListView_DragOver"
                    Drop="HandleDrop"
                    ItemContainerStyle="{StaticResource FullWidthListViewItem}"
                    ItemsSource="{Binding TicketsFinalizados}"
                    MouseMove="ListView_MouseMove"
                    PreviewMouseLeftButtonDown="ListView_PreviewMouseLeftButtonDown">

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="2" Padding="12" Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="5" MouseLeftButtonUp="AccesoNuevaVentana">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Titol}" TextWrapping="Wrap">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Estat}" Value="2">
                                                        <Setter Property="TextDecorations" Value="Strikethrough" />
                                                        <Setter Property="Foreground" Value="#777" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0">

                                        <Ellipse Width="10" Height="10" Margin="0,0,5,0" VerticalAlignment="Center">
                                            <Ellipse.Style>
                                                <Style TargetType="Ellipse">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="0">
                                                            <Setter Property="Fill" Value="Green" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="1">
                                                            <Setter Property="Fill" Value="Orange" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="2">
                                                            <Setter Property="Fill" Value="Red" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Prioritat}" Value="3">
                                                            <Setter Property="Fill" Value="Purple" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Ellipse.Style>
                                        </Ellipse>

                                        <TextBlock FontSize="11" Foreground="#999" VerticalAlignment="Center" Text="{Binding Codi, StringFormat='#{0}'}" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

            </DockPanel>

        </Border>



        <StackPanel
            Grid.Column="3"
            Margin="15"
            VerticalAlignment="Top">

            <TextBlock
                Margin="0,0,0,15"
                FontSize="16"
                FontWeight="Bold"
                Foreground="#555"
                Text="Acciones" />



            <Button
                Height="50"
                Margin="0,0,0,10"
                Background="#0079BF"
                BorderThickness="0"
                Click="NuevaTasca"
                Cursor="Hand">

                <Button.Resources>

                    <Style TargetType="Border">

                        <Setter Property="CornerRadius" Value="8" />

                    </Style>

                </Button.Resources>

                <StackPanel Orientation="Horizontal">

                    <TextBlock
                        Margin="0,0,8,0"
                        VerticalAlignment="Center"
                        FontSize="20"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="+" />

                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="13"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="Nueva Tarea" />

                </StackPanel>

            </Button>



            <Button
                Name="RespBtn"
                Height="50"
                Background="#519839"
                BorderThickness="0"
                Click="Responsables"
                Cursor="Hand">

                <Button.Resources>

                    <Style TargetType="Border">

                        <Setter Property="CornerRadius" Value="8" />

                    </Style>

                </Button.Resources>

                <StackPanel Orientation="Horizontal">

                    <TextBlock
                        Margin="0,0,8,0"
                        VerticalAlignment="Center"
                        FontSize="16"
                        Foreground="White"
                        Text="👤" />

                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="13"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="Añadir Responsable" />

                </StackPanel>

            </Button>



            <TextBlock
                Margin="0,20,0,0"
                FontSize="11"
                Foreground="#888"
                TextAlignment="Center"
                TextWrapping="Wrap">
                Gestiona tus tareas y equipo desde este panel lateral.
            </TextBlock>

            <ListView
                Name="ListaCompañeros"
                Width="150"
                Height="250"
                Margin="5"
                HorizontalContentAlignment="Center"
                Background="LightGray"
                SelectedValuePath="Codi"
                SelectionMode="Single">

                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border
                            Width="120"
                            Margin="2"
                            Padding="8"
                            Background="#C8E6C9"
                            BorderBrush="#4CAF50"
                            BorderThickness="1"
                            CornerRadius="5">
                            <Grid>
                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Foreground="#333"
                                    Text="{Binding usuari}"
                                    TextWrapping="Wrap" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <Button
                Name="EliminarUsuariobtn"
                Width="150"
                Height="30"
                Click="EliminarUsuario"
                Cursor="Hand">
                Eliminar Usuario
            </Button>
        </StackPanel>
    </Grid>
</Window>